# Обзор безопасности текущей архитектуры

В этом документе описаны плюсы, минусы и потенциальные улучшения безопасности для текущей системы аутентификации, основанной на локальном хранилище (`localStorage`).

## Текущая архитектура

- **Аутентификация:** Полностью на стороне клиента, управляется через React Context (`src/context/auth-context.tsx`).
- **Хранение данных пользователей:** Данные пользователей, включая "хэш" пароля, хранятся в `localStorage` браузера.
- **Хранение данных приложения:** Все данные (расписания, соревнования и т.д.) являются статичными и хранятся в файле `src/lib/data.ts`.

---

## Плюсы (Преимущества)

1.  **Полная автономность:** Приложение может работать полностью офлайн после первоначальной загрузки. Нет зависимости от доступности сети или внешних сервисов.
2.  **Нулевые затраты:** Отсутствует необходимость в серверной инфраструктуре (backend) и базах данных, что исключает расходы на хостинг.
3.  **Высокая скорость работы:** Все операции (вход, регистрация, доступ к данным) выполняются мгновенно, так как не требуют сетевых запросов.
4.  **Простота и скорость разработки:** Идеально подходит для быстрого создания прототипов, MVP или демонстрационных версий, где полноценная серверная часть избыточна.
5.  **Конфиденциальность (условная):** Данные пользователя не покидают его браузер и не передаются на какой-либо сервер.

---

## Минусы (Недостатки)

1.  **КРАЙНЕ НИЗКАЯ БЕЗОПАСНОСТЬ:** Это самый критичный недостаток.
    - **Уязвимость к XSS (Cross-Site Scripting):** Если в приложении появится уязвимость, позволяющая выполнить сторонний JavaScript-код, злоумышленник сможет легко получить доступ ко всему содержимому `localStorage` и украсть учетные данные всех пользователей.
    - **Прямой доступ:** Любой, кто имеет физический или удаленный доступ к компьютеру и браузеру пользователя, может открыть инструменты разработчика и просмотреть/скопировать все данные из `localStorage`.
    - **Слабое "хэширование":** Текущая реализация "хэширования" (`'hashed_' + password`) является просто конкатенацией строк и не обеспечивает никакой реальной защиты. Пароли хранятся практически в открытом виде.

2.  **Отсутствие синхронизации между устройствами:** Пользователь, зарегистрировавшийся в одном браузере на одном устройстве, не сможет войти в свой аккаунт на другом устройстве или даже в другом браузере на том же устройстве. Данные привязаны к конкретному браузеру.

3.  **Высокий риск потери данных:** Если пользователь очистит данные своего браузера (`localStorage`, кэш), все созданные аккаунты будут **безвозвратно удалены**. Нет механизма восстановления.

4.  **Немасштабируемость:** Система не подходит для реального многопользовательского приложения. Управление большим количеством пользователей становится невозможным, и нет централизованного контроля.

5.  **Ограниченные права администратора:** "Администратор" в такой системе имеет привилегии только на стороне клиента (например, видит дополнительные пункты меню), но не имеет реальных административных полномочий на сервере.

---

## Варианты улучшения защиты

Защитить текущую локальную систему так, чтобы она стала по-настояшему безопасной, **невозможно**. Можно лишь незначительно усложнить взлом.

1.  **Улучшение хэширования:** Можно использовать криптографические функции, доступные в браузере (например, Web Crypto API с алгоритмом `PBKDF2`). Это защитит пароль от простого просмотра, но не от кражи, так как ключ для расшифровки все равно будет доступен в клиентском коде.
2.  **Использование `sessionStorage`:** В отличие от `localStorage`, `sessionStorage` очищается при закрытии вкладки. Это сокращает время жизни данных, но не защищает от атак во время активной сессии.

### Настоятельно рекомендуемый путь

**Единственный надежный способ обеспечить безопасность — это использовать серверную систему аутентификации.**

Рекомендуемое решение — **Firebase Authentication**.

**Преимущества Firebase Authentication:**

- **Безопасность:** Разработано Google с учетом всех современных стандартов безопасности. Пароли надежно хэшируются и хранятся на серверах Google.
- **Централизация:** Пользователи могут входить в свой аккаунт с любого устройства.
- **Надежность:** Данные не теряются при очистке кэша браузера.
- **Дополнительные провайдеры:** Легко настраивается вход через Google, GitHub, Facebook и другие сервисы.
- **Масштабируемость:** Готовое решение для приложений с любым количеством пользователей.

## Вывод

Текущая локальная система аутентификации является отличным решением для **прототипа, личного проекта или офлайн-инструмента**. Для любого приложения, которое будет доступно публично и обрабатывать реальные пользовательские данные, **категорически рекомендуется перейти на серверное решение, такое как Firebase Authentication.**
